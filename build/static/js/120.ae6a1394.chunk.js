(this["webpackJsonpmain-bt5"]=this["webpackJsonpmain-bt5"]||[]).push([[120,234],{141:function(e,t,n){"use strict";var c=n(156);n(182);t.a=function(e,t){return"success"===t?c.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===t?c.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===t?c.b.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===t?c.b.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Object(c.b)(e)}},144:function(e,t,n){"use strict";n.r(t);var c=n(63),r=(n(1),n(2));function a(e){var t=e.details,n=void 0===t?null:t,a=e.title;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(c.o,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(r.jsxs)(c.eb,{children:[Object(r.jsx)(c.s,{children:a}),n&&Object(r.jsxs)(c.s,{children:[Object(r.jsx)(c.eb,{children:Object(r.jsxs)("small",{children:["Modification Date: ",n&&n.modification_date]})}),Object(r.jsx)(c.eb,{className:"d-flex",children:Object(r.jsxs)("small",{children:["Creation Date: ",n&&n.creation_date]})})]})]})})})}t.default=function(e){var t=e.children,n=e.title,i=e.subtitle,o=e.creationModificationDate;return Object(r.jsxs)(c.i,{className:"shadow-none",children:[Object(r.jsx)(a,{details:o,title:n}),Object(r.jsxs)(c.j,{className:"p-4",children:[Object(r.jsx)(c.m,{className:"text-muted mb-3",children:i||""}),Object(r.jsx)("div",{children:t})]})]})}},275:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},323:function(e,t,n){e.exports=function(){"use strict";function e(e,t){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&t(n,e[n])}function t(e){return void 0===e||null===e||0===e.length||0===e.trim().length}var n={unstyled:"p","header-one":"h1","header-two":"h2","header-three":"h3","header-four":"h4","header-five":"h5","header-six":"h6","unordered-list-item":"ul","ordered-list-item":"ol",blockquote:"blockquote",code:"pre"};function c(e){return e&&n[e]}function r(t){var n="";return e(t,(function(e,t){t&&(n+="".concat(e,":").concat(t,";"))})),n}function a(e,t){var n=[];if(t)for(var c=0,r=0,a=e,i=t.trigger||"#",o=t.separator||" ";a.length>0&&r>=0;)if(a[0]===i?(r=0,c=0,a=a.substr(i.length)):(r=a.indexOf(o+i))>=0&&(a=a.substr(r+(o+i).length),c+=r+o.length),r>=0){var s=a.indexOf(o)>=0?a.indexOf(o):a.length,l=a.substr(0,s);l&&l.length>0&&n.push({offset:c,length:l.length+i.length,type:"HASHTAG"}),c+=i.length}return n}function i(e,t){var n=[],c=0,r=e.entityRanges.map((function(e){return{offset:e.offset,length:e.length,key:e.key,type:"ENTITY"}}));return(r=(r=r.concat(a(e.text,t))).sort((function(e,t){return e.offset-t.offset}))).forEach((function(e){e.offset>c&&n.push({start:c,end:e.offset}),n.push({start:e.offset,end:e.offset+e.length,entityKey:e.key,type:e.type}),c=e.offset+e.length})),c<e.text.length&&n.push({start:c,end:e.text.length}),n}function o(e){return!(!(e.entityRanges.length>0)||!t(e.text)&&"atomic"!==e.type)}function s(e){var t=e.text,n=e.inlineStyleRanges,c={BOLD:new Array(t.length),ITALIC:new Array(t.length),UNDERLINE:new Array(t.length),STRIKETHROUGH:new Array(t.length),CODE:new Array(t.length),SUPERSCRIPT:new Array(t.length),SUBSCRIPT:new Array(t.length),COLOR:new Array(t.length),BGCOLOR:new Array(t.length),FONTSIZE:new Array(t.length),FONTFAMILY:new Array(t.length),length:t.length};return n&&n.length>0&&n.forEach((function(e){for(var t=e.offset,n=t+e.length,r=t;r<n;r+=1)0===e.style.indexOf("color-")?c.COLOR[r]=e.style.substring(6):0===e.style.indexOf("bgcolor-")?c.BGCOLOR[r]=e.style.substring(8):0===e.style.indexOf("fontsize-")?c.FONTSIZE[r]=e.style.substring(9):0===e.style.indexOf("fontfamily-")?c.FONTFAMILY[r]=e.style.substring(11):c[e.style]&&(c[e.style][r]=!0)})),c}function l(e,t){var n={};return e.COLOR[t]&&(n.COLOR=e.COLOR[t]),e.BGCOLOR[t]&&(n.BGCOLOR=e.BGCOLOR[t]),e.FONTSIZE[t]&&(n.FONTSIZE=e.FONTSIZE[t]),e.FONTFAMILY[t]&&(n.FONTFAMILY=e.FONTFAMILY[t]),e.UNDERLINE[t]&&(n.UNDERLINE=!0),e.ITALIC[t]&&(n.ITALIC=!0),e.BOLD[t]&&(n.BOLD=!0),e.STRIKETHROUGH[t]&&(n.STRIKETHROUGH=!0),e.CODE[t]&&(n.CODE=!0),e.SUBSCRIPT[t]&&(n.SUBSCRIPT=!0),e.SUPERSCRIPT[t]&&(n.SUPERSCRIPT=!0),n}function d(e,t,n){var c=!0;return n>0&&n<e.length?t.forEach((function(t){c=c&&e[t][n]===e[t][n-1]})):c=!1,c}function u(e,t){return"BOLD"===e?"<strong>".concat(t,"</strong>"):"ITALIC"===e?"<em>".concat(t,"</em>"):"UNDERLINE"===e?"<ins>".concat(t,"</ins>"):"STRIKETHROUGH"===e?"<del>".concat(t,"</del>"):"CODE"===e?"<code>".concat(t,"</code>"):"SUPERSCRIPT"===e?"<sup>".concat(t,"</sup>"):"SUBSCRIPT"===e?"<sub>".concat(t,"</sub>"):t}function h(e){return e&&e.length>0?e.map((function(e){switch(e){case"\n":return"<br>";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return e}})).join(""):""}function j(e,t){if(e&&(e.COLOR||e.BGCOLOR||e.FONTSIZE||e.FONTFAMILY)){var n='style="';return e.COLOR&&(n+="color: ".concat(e.COLOR,";")),e.BGCOLOR&&(n+="background-color: ".concat(e.BGCOLOR,";")),e.FONTSIZE&&(n+="font-size: ".concat(e.FONTSIZE).concat(/^\d+$/.test(e.FONTSIZE)?"px":"",";")),e.FONTFAMILY&&(n+="font-family: ".concat(e.FONTFAMILY,";")),"<span ".concat(n+='"',">").concat(t,"</span>")}return t}function O(e,t,n,c){var r=e[t];if("function"===typeof c){var a=c(r,n);if(a)return a}if("MENTION"===r.type)return'<a href="'.concat(r.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(r.data.value,'">').concat(n,"</a>");if("LINK"===r.type){var i=r.data.targetOption||"_self";return'<a href="'.concat(r.data.url,'" target="').concat(i,'">').concat(n,"</a>")}if("IMAGE"===r.type){var o=r.data.alignment;return o&&o.length?'<div style="text-align:'.concat(o,';"><img src="').concat(r.data.src,'" alt="').concat(r.data.alt,'" style="height: ').concat(r.data.height,";width: ").concat(r.data.width,'"/></div>'):'<img src="'.concat(r.data.src,'" alt="').concat(r.data.alt,'" style="height: ').concat(r.data.height,";width: ").concat(r.data.width,'"/>')}return"EMBEDDED_LINK"===r.type?'<iframe width="'.concat(r.data.width,'" height="').concat(r.data.height,'" src="').concat(r.data.src,'" frameBorder="0"></iframe>'):n}function b(e,t,n,c){var r=[],a=Array.from(e.text);if(a.length>0)for(var i,o=s(e),u=n;u<c;u+=1)u!==n&&d(o,t,u)?(i.text.push(a[u]),i.end=u+1):(i={styles:l(o,u),text:[a[u]],start:u,end:u+1},r.push(i));return r}function f(e){if(e){for(var t=e,n=0;n<t.length&&" "===e[n];n+=1)t=t.replace(" ","&nbsp;");return t}return e}function p(e){if(e){for(var t=e,n=t.length-1;n>=0&&" "===t[n];n-=1)t="".concat(t.substring(0,n),"&nbsp;").concat(t.substring(n+1));return t}return e}function x(t){var n=t.styles,c=h(t.text);return e(n,(function(e,t){c=u(e,c)})),c}function m(e,t){var n=b(e,["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","SUPERSCRIPT","SUBSCRIPT"],t.start,t.end),c="";return n.forEach((function(e){c+=x(e)})),c=j(t.styles,c)}function g(e,t,n,c){var r=[];b(e,["COLOR","BGCOLOR","FONTSIZE","FONTFAMILY"],n.start,n.end).forEach((function(t){r.push(m(e,t))}));var a=r.join("");return"ENTITY"===n.type?void 0!==n.entityKey&&null!==n.entityKey&&(a=O(t,n.entityKey,a,c)):"HASHTAG"===n.type&&(a='<a href="'.concat(a,'" class="wysiwyg-hashtag">').concat(a,"</a>")),a}function y(e,t,n,c){var r=[],a=i(e,n);return a.forEach((function(n,i){var o=g(e,t,n,c);0===i&&(o=f(o)),i===a.length-1&&(o=p(o)),r.push(o)})),r.join("")}function v(e,t,n,a,i){var s=[];if(o(e))s.push(O(t,e.entityRanges[0].key,void 0,i));else{var l=c(e.type);if(l){s.push("<".concat(l));var d=r(e.data);d&&s.push(' style="'.concat(d,'"')),a&&s.push(' dir = "auto"'),s.push(">"),s.push(y(e,t,n,i)),s.push("</".concat(l,">"))}}return s.push("\n"),s.join("")}function C(e){return"unordered-list-item"===e||"ordered-list-item"===e}function E(e,t,n,a,i){var o,s=[],l=[];return e.forEach((function(e){var d=!1;if(o?o.type!==e.type?(s.push("</".concat(c(o.type),">\n")),s.push("<".concat(c(e.type),">\n"))):o.depth===e.depth?l&&l.length>0&&(s.push(E(l,t,n,a,i)),l=[]):(d=!0,l.push(e)):s.push("<".concat(c(e.type),">\n")),!d){s.push("<li");var u=r(e.data);u&&s.push(' style="'.concat(u,'"')),a&&s.push(' dir = "auto"'),s.push(">"),s.push(y(e,t,n,i)),s.push("</li>\n"),o=e}})),l&&l.length>0&&s.push(E(l,t,n,a,i)),s.push("</".concat(c(o.type),">\n")),s.join("")}function I(e,t,n,c){var r=[];if(e){var a=e.blocks,i=e.entityMap;if(a&&a.length>0){var o=[];if(a.forEach((function(e){if(C(e.type))o.push(e);else{if(o.length>0){var a=E(o,i,t,c);r.push(a),o=[]}var s=v(e,i,t,n,c);r.push(s)}})),o.length>0){var s=E(o,i,t,n,c);r.push(s),o=[]}}}return r.join("")}return I}()},391:function(e,t){},862:function(e,t,n){"use strict";n.r(t);var c=n(11),r=n(4),a=n(6),i=n(3),o=n(9),s=n(27),l=n(1),d=n(63),u=n(331),h=n(291),j=n(323),O=n.n(j),b=n(12),f=n(58),p=n(160),x=n(385),m=n(7),g=n(141),y=n(144),v=n(2);t.default=function(e){var t=e.editInvoiceData,n=e.setEditInvoiceData,j=e.projectInfo,C=Object(b.h)().id,E=Object(l.useState)(0),I=Object(s.a)(E,2),_=I[0],R=I[1],T=Object(l.useState)(""),N=Object(s.a)(T,2),S=N[0],L=N[1],w=Object(l.useState)({discount:"",quote_code:"",po_number:"",project_location:"",project_reference:"",invoice_date:"",code:"",so_ref_no:"",site_code:"",attention:"",reference:"",invoice_terms:"",status:"due",paymentTerms:"",invoice_code:"",order_id:C,invoice_due_date:""}),A=Object(s.a)(w,2),F=A[0],D=A[1],k=Object(l.useState)([{id:x.a.int(1,99),unit:"",qty:"",unit_price:"",total_cost:"",remarks:"",item_title:"",description:""}]),P=Object(s.a)(k,2),H=P[0],B=P[1],U=function(e){D(Object(o.a)(Object(o.a)({},F),{},Object(i.a)({},e.target.name,e.target.value)))},M=function(e,t){for(var n=0;n<t.length;n++)(c={description:t[n].description,invoice_id:e,amount:t[n].total_cost,item_title:t[n].item_title,item_code:j.item_code,cost_price:2,qty:t[n].qty,unit:t[n].unit,remarks:t[n].remarks,unit_price:parseFloat(t[n].unit_price)}).order_id=j,m.a.post("/finance/insertInvoiceItem",c).then((function(){Object(g.a)("Line Item Added Successfully","sucess")})).catch((function(){Object(g.a)("Cannot Add Line Items","error")}));var c},G=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var c,a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.invoice_amount=_+.07*_,F.order_id=C,F.invoice_code=t,11===(c=new Date).getMonth()?(a=new Date(c.getFullYear()+1,0,c.getDate()),F.invoice_due_date=a):(i=new Date(c.getFullYear(),c.getMonth()+1,c.getDate()),F.invoice_due_date=i),m.a.post("/finance/insertInvoice",F).then((function(e){Object(g.a)("Invoice inserted successfully.","success"),M(e.data.data.insertId,n),setTimeout((function(){window.location.reload()}),300)})).catch((function(){Object(g.a)("Network connection error.")}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e,t,n=[];p(".lineitem tbody tr").each((function(){var e={};p(this).find("input").each((function(){var t=p(this).attr("name");e[t]=p(this).val()})),n.push(e)})),R(0),B([{id:x.a.int(1,99),unit:"",qty:"",unit_price:"",total_cost:"",remarks:"",item_title:"",description:""}]),e=n,t="invoice",m.a.post("/commonApi/getCodeValue",{type:t}).then((function(t){G(e,t.data.data)})).catch((function(){G(e,"")}))};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(d.N,{size:"xl",isOpen:t,children:[Object(v.jsxs)(d.Q,{children:["Create Invoice",Object(v.jsx)(d.e,{className:"shadow-none",color:"secondary",onClick:function(){n(!1)},children:"X"})]}),Object(v.jsx)(d.i,{children:Object(v.jsx)(d.O,{children:Object(v.jsx)(d.eb,{children:Object(v.jsx)(d.s,{md:"12",children:Object(v.jsx)(d.A,{children:Object(v.jsxs)(d.eb,{children:[Object(v.jsx)(d.s,{md:"3",children:Object(v.jsx)(d.e,{className:"shadow-none",color:"primary",type:"button",onClick:function(){B([].concat(Object(c.a)(H),[{id:(new Date).getTime().toString(),uom:"",qty:"",unitprice:"",total_cost:"",remarks:"",item:"",description:""}]))},children:"Add Line Item"})}),Object(v.jsxs)(d.eb,{children:[Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Discount"}),Object(v.jsx)(d.E,{type:"number",onChange:U,value:F&&F.discount,name:"discount"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Quote Code"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.quote_code,name:"quote_code"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"PO Number"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.po_number,name:"po_number"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Project Location"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.project_location,name:"project_location"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Project Reference"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.project_reference,name:"project_reference"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Invoice date"}),Object(v.jsx)(d.E,{type:"date",onChange:U,value:F&&F.invoice_date,name:"invoice_date"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Code"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.code,name:"code"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"SO Ref Number"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.so_ref_no,name:"so_ref_no"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Site Code"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.site_code,name:"site_code"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Attention"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.attention,name:"attention"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Reference"}),Object(v.jsx)(d.E,{type:"textarea",onChange:U,value:F&&F.reference,name:"reference"})]})}),Object(v.jsx)(d.s,{md:"4",children:Object(v.jsxs)(d.C,{children:[Object(v.jsx)(d.H,{children:"Invoice Terms"}),Object(v.jsx)(d.E,{type:"text",onChange:U,value:F&&F.invoice_terms,name:"invoice_terms"})]})}),Object(v.jsx)(y.default,{title:"Description",children:Object(v.jsx)(u.Editor,{editorState:S,wrapperClassName:"demo-wrapper mb-0",editorClassName:"demo-editor border mb-4 edi-height",onEditorStateChange:function(e){!function(e,t){D(Object(o.a)(Object(o.a)({},F),{},Object(i.a)({},t,O()(Object(h.convertToRaw)(e.getCurrentContent())))))}(e,"payment_terms"),L(e)}})})]}),Object(v.jsx)(d.i,{children:Object(v.jsxs)("table",{className:"lineitem",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"Item"}),Object(v.jsx)("th",{scope:"col",children:"Description "}),Object(v.jsx)("th",{scope:"col",children:"UoM"}),Object(v.jsx)("th",{scope:"col",children:"Qty"}),Object(v.jsx)("th",{scope:"col",children:"Unit Price"}),Object(v.jsx)("th",{scope:"col",children:"Total Price"}),Object(v.jsx)("th",{scope:"col",children:"Remarks"}),Object(v.jsx)("th",{scope:"col"})]})}),Object(v.jsx)("tbody",{children:H.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{"data-label":"Item",children:Object(v.jsx)(d.E,{defaultValue:e.item,type:"text",name:"item_title"})}),Object(v.jsx)("td",{"data-label":"Description",children:Object(v.jsx)(d.E,{defaultValue:e.description,type:"text",name:"description"})}),Object(v.jsx)("td",{"data-label":"UoM",children:Object(v.jsx)(d.E,{defaultValue:e.unit,type:"text",name:"unit"})}),Object(v.jsx)("td",{"data-label":"Qty",children:Object(v.jsx)(d.E,{defaultValue:e.qty,type:"number",name:"qty"})}),Object(v.jsx)("td",{"data-label":"Unit Price",children:Object(v.jsx)(d.E,{defaultValue:e.unit_price,onBlur:function(){!function(){var e=0,t=[];p(".lineitem tbody tr").each((function(){var e={};p(this).find("input").each((function(){var t=p(this).attr("name");e[t]=p(this).val(),e.total_cost=e.qty*e.unit_price})),t.push(e)})),t.forEach((function(t){t.total_cost&&(e+=parseFloat(t.total_cost))})),B(t),R(e)}()},type:"number",name:"unit_price"})}),Object(v.jsx)("td",{"data-label":"Total Price",children:Object(v.jsx)(d.E,{defaultValue:e.total_cost,type:"text",name:"total_cost",disabled:!0})}),Object(v.jsx)("td",{"data-label":"Remarks",children:Object(v.jsx)(d.E,{defaultValue:e.remarks,type:"text",name:"remarks"})}),Object(v.jsx)("td",{"data-label":"Action",children:Object(v.jsxs)(f.b,{to:"",children:[Object(v.jsx)(d.E,{type:"hidden",name:"id",defaultValue:e.id}),Object(v.jsx)("span",{onClick:function(){!function(e){if(B((function(t){return t.filter((function(t){return t.id!==e.id}))})),e.total_cost){var t=_-parseFloat(e.total_cost);R(t)}}(e)},children:"Clear"})]})})]},e.id)}))})]})}),Object(v.jsxs)(d.P,{children:[Object(v.jsxs)(d.e,{className:"shadow-none",color:"primary",onClick:function(){q()},children:[" ","Submit"," "]}),Object(v.jsx)(d.e,{className:"shadow-none",color:"secondary",onClick:function(){n(!1)},children:"Cancel"})]})]})})})})})})]})})}}}]);
//# sourceMappingURL=120.ae6a1394.chunk.js.map