(this["webpackJsonpmain-bt5"]=this["webpackJsonpmain-bt5"]||[]).push([[98,234],{141:function(e,t,c){"use strict";var a=c(156);c(182);t.a=function(e,t){return"success"===t?a.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===t?a.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===t?a.b.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===t?a.b.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Object(a.b)(e)}},142:function(e,t,c){"use strict";var a=c(63),n=c(12),s=c(58),i=c(2);t.a=function(e){var t=Object(n.f)(),c=t.pathname.split("/")[1],l=t.pathname.split("/")[2];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h4",{children:e.heading}),Object(i.jsxs)(a.c,{children:[Object(i.jsx)(a.d,{to:"/",tag:s.b,className:"text-decoration-none",children:"Home"}),c?Object(i.jsx)(a.d,{active:!0,children:c}):"",l?Object(i.jsx)(a.d,{active:!0,children:l}):""]})]})}},144:function(e,t,c){"use strict";c.r(t);var a=c(63),n=(c(1),c(2));function s(e){var t=e.details,c=void 0===t?null:t,s=e.title;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(a.o,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(n.jsxs)(a.eb,{children:[Object(n.jsx)(a.s,{children:s}),c&&Object(n.jsxs)(a.s,{children:[Object(n.jsx)(a.eb,{children:Object(n.jsxs)("small",{children:["Modification Date: ",c&&c.modification_date]})}),Object(n.jsx)(a.eb,{className:"d-flex",children:Object(n.jsxs)("small",{children:["Creation Date: ",c&&c.creation_date]})})]})]})})})}t.default=function(e){var t=e.children,c=e.title,i=e.subtitle,l=e.creationModificationDate;return Object(n.jsxs)(a.i,{className:"shadow-none",children:[Object(n.jsx)(s,{details:l,title:c}),Object(n.jsxs)(a.j,{className:"p-4",children:[Object(n.jsx)(a.m,{className:"text-muted mb-3",children:i||""}),Object(n.jsx)("div",{children:t})]})]})}},1541:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c(9),s=c(27),i=c(1),l=c(63),r=c(12),o=c(161),d=c.n(o),j=c(156),b=c(309),h=c(278),O=c(215),u=c(2);function x(e){var t=e.PastleavesDetails;return Object(u.jsx)(l.A,{children:Object(u.jsx)(l.eb,{children:Object(u.jsxs)(l.ib,{id:"example1",className:"display border border-secondary rounded",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:[{name:"From date"},{name:"To date"},{name:"Leave Type"},{name:" No Of Days"}].map((function(e){return Object(u.jsx)("td",{children:e.name},e.name)}))})}),Object(u.jsx)("tbody",{children:t&&t.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:d()(e.from_date).format("YYYY-MM-DD")}),Object(u.jsx)("td",{children:d()(e.to_date).format("YYYY-MM-DD")}),Object(u.jsx)("td",{children:e.leave_type}),Object(u.jsx)("td",{children:e.no_of_days})]},e.employee_id)}))})]})})})}var m=c(144),p=c(142),f=c(141),v=(c(204),c(205),c(7));function g(e){var t=e.handleInputs,c=e.leavesDetails,a=e.difference;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m.default,{title:"LeaveEdit",children:Object(u.jsx)(l.A,{children:Object(u.jsxs)(l.C,{children:[Object(u.jsxs)(l.eb,{children:[Object(u.jsx)(l.s,{md:"4",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"Employee Name"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:c&&c.employee_name})]})}),Object(u.jsx)(l.s,{md:"4",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"Designation"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:c&&c.designation})]})}),Object(u.jsx)(l.s,{md:"4",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"Applied Date"}),Object(u.jsx)(l.E,{type:"Date",onChange:t,value:c&&d()(c.date).format("YYYY-MM-DD"),name:"date"})]})})]}),Object(u.jsxs)(l.eb,{children:[Object(u.jsxs)(l.s,{md:"4",children:[Object(u.jsx)(l.H,{children:"Status *"}),Object(u.jsxs)(l.E,{type:"select",onChange:t,value:c&&c.status,name:"status",children:[Object(u.jsx)("option",{defaultValue:"selected",children:"Applied"}),Object(u.jsx)("option",{value:"Approved",children:"Approved"}),Object(u.jsx)("option",{value:"Cancelled",children:"Cancelled"}),Object(u.jsx)("option",{value:"HR Approved",children:"HR Approved"}),Object(u.jsx)("option",{value:"Denied",children:"Denied"}),Object(u.jsx)("option",{value:"Hold",children:"Hold"}),Object(u.jsx)("option",{value:"Waiting for Approval",children:"Waiting for Approval"})]})]}),Object(u.jsxs)(l.s,{md:"4",children:[Object(u.jsx)(l.H,{children:"Type of Leave *"}),Object(u.jsxs)(l.E,{type:"select",onChange:function(e){t(e)},value:c&&c.leave_type,name:"leave_type",children:[Object(u.jsx)("option",{defaultValue:"selected",children:"Please Select"}),Object(u.jsx)("option",{value:"Absent",children:"Absent"}),Object(u.jsx)("option",{value:"Annual Leave",children:"Annual Leave"}),Object(u.jsx)("option",{value:"Hospitalization Leave",children:"Hospitalization Leave"}),Object(u.jsx)("option",{value:"Sick Leave",children:"Sick Leave"})]})]}),c&&"Annual Leave"===c.leave_type&&Object(u.jsxs)(l.s,{md:"4",children:[Object(u.jsx)(l.H,{children:"Went Overseas"}),Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.E,{type:"radio",name:"went_overseas",value:"1",onChange:t,defaultChecked:c&&1===c.went_overseas&&!0}),Object(u.jsx)(l.H,{children:"Yes"}),Object(u.jsx)("br",{}),Object(u.jsx)(l.E,{type:"radio",name:"went_overseas",value:"0",onChange:t,defaultChecked:c&&0===c.went_overseas&&!0}),Object(u.jsx)(l.H,{children:"No"})]})]})]})]})})}),Object(u.jsx)(m.default,{title:"More Details",children:Object(u.jsxs)(l.A,{children:[Object(u.jsxs)(l.eb,{children:[Object(u.jsx)(l.s,{md:"6",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"From Date"}),Object(u.jsx)(l.E,{type:"date",onChange:t,value:c&&d()(c.from_date).format("YYYY-MM-DD"),name:"from_date"})]})}),Object(u.jsx)(l.s,{md:"6",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"To Date"}),Object(u.jsx)(l.E,{type:"date",onChange:t,value:c&&d()(c.to_date).format("YYYY-MM-DD"),name:"to_date"})]})})]}),Object(u.jsxs)(l.eb,{children:[Object(u.jsx)(l.s,{md:"6",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"No of Days(Current Month)"}),Object(u.jsx)(l.E,{type:"text",onChange:t,value:c&&c.no_of_days,name:"no_of_days"})]})}),a&&Object(u.jsx)(l.s,{md:"3",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"No of Days(Next Month)"}),Object(u.jsx)(l.E,{type:"text",onChange:t,value:c&&c.no_of_days_next_month,name:"no_of_days_next_month"})]})}),Object(u.jsx)(l.s,{md:"3",children:Object(u.jsxs)(l.C,{children:[Object(u.jsx)(l.H,{children:"Reason"}),Object(u.jsx)(l.E,{type:"textarea",onChange:t,value:c&&c.reason,name:"reason"})]})})]})]})})]})}var y=c(821);t.default=function(){var e=Object(i.useState)("1"),t=Object(s.a)(e,2),c=t[0],o=t[1],_=Object(i.useState)(!1),C=Object(s.a)(_,2),D=C[0],N=C[1],A=Object(i.useState)({}),H=Object(s.a)(A,2),F=H[0],M=H[1],k=Object(i.useState)(),L=Object(s.a)(k,2),Y=L[0],S=L[1],T=Object(i.useState)(""),w=Object(s.a)(T,2),P=w[0],E=w[1],I=Object(i.useState)(""),U=Object(s.a)(I,2),R=U[0],B=U[1],z=Object(i.useState)({modelType:""}),G=Object(s.a)(z,2),J=G[0],W=G[1],V=Object(i.useState)(),q=Object(s.a)(V,2),Q=q[0],K=q[1],X=Object(r.h)().id,Z=Object(r.g)(),$=function(e){c!==e&&o(e)},ee=function(){v.a.post("/leave/getLeaveByid",{leave_id:X}).then((function(e){var t;M(e.data.data[0]),t=e.data.data[0].employee_id,v.a.post("/leave/getPastLeaveHistoryById",{employee_id:t}).then((function(e){S(e.data.data)})).catch((function(){Object(f.a)("leaves Data Not Found","info")}));var c=d()(e.data.data[0].from_date).format("MM"),a=d()(e.data.data[0].to_date).format("MM");K(c-a)})).catch((function(){Object(f.a)("leaves Data Not Found","info")}))};return Object(i.useEffect)((function(){ee()}),[X]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.a,{heading:F&&F.employee_name}),Object(u.jsx)(y.a,{editData:function(){F.from_date&&F.to_date&&F.leave_type&&F.no_of_days?v.a.post("/leave/editleave",F).then((function(){Object(f.a)("Record editted successfully","success")})).catch((function(){Object(f.a)("Unable to edit record.","error")})):Object(f.a)("Please fill all required fields","warning")},navigate:Z,applyChanges:function(){},backToList:function(){Z("/Leave")},module:"Leave"}),Object(u.jsx)(g,{handleInputs:function(e){M(Object(n.a)(Object(n.a)({},F),{},Object(a.a)({},e.target.name,e.target.value)))},leavesDetails:F,difference:Q}),Object(u.jsxs)(m.default,{children:[Object(u.jsx)(j.a,{}),Object(u.jsxs)(l.R,{tabs:!0,children:[Object(u.jsx)(l.S,{children:Object(u.jsx)(l.T,{className:"1"===c?"active":"",onClick:function(){$("1")},children:"Attachment"})}),Object(u.jsx)(l.S,{children:Object(u.jsx)(l.T,{className:"2"===c?"active":"",onClick:function(){$("2")},children:"Past Leave HIstory"})})]}),Object(u.jsxs)(l.gb,{className:"p-4",activeTab:c,children:[Object(u.jsx)(l.hb,{tabId:"1",children:Object(u.jsx)(l.A,{children:Object(u.jsx)(l.C,{children:Object(u.jsxs)(m.default,{title:"Attachments",children:[Object(u.jsx)(l.eb,{children:Object(u.jsx)(l.s,{xs:"12",md:"3",className:"mb-3",children:Object(u.jsx)(l.e,{className:"shadow-none",color:"primary",onClick:function(){E("Leave"),B(["JPG","PNG","GIF","PDF"]),W({modelType:"attachment"}),console.log("inside DataForAttachment"),N(!0)},children:Object(u.jsx)(b.a,{className:"rounded-circle",width:"20"})})})}),Object(u.jsx)(h.a,{moduleId:X,attachmentModal:D,setAttachmentModal:N,roomName:P,fileTypes:R,altTagData:"LeaveRelated Data",desc:"LeaveRelated Data",recordType:"RelatedPicture",mediaType:J.modelType}),Object(u.jsx)(O.a,{moduleId:X,roomName:"Leave",recordType:"RelatedPicture"})]})})})}),Object(u.jsx)(l.hb,{tabId:"2",children:Object(u.jsx)(x,{PastleavesDetails:Y})})]})]})]})}},205:function(e,t,c){},215:function(e,t,c){"use strict";var a=c(27),n=c(1),s=c(288),i=c(141),l=c(7),r=c(2);t.a=function(e){var t=e.moduleId,c=e.roomName,o=e.updateFile,d={},j=Object(n.useState)(null),b=Object(a.a)(j,2),h=b[0],O=b[1],u=function(){l.a.post("/file/getListOfFiles",{record_id:t,room_name:c}).then((function(e){O(e.data)})).catch((function(){Object(i.a)("Unable to fetch files","info")}))};return Object(n.useEffect)((function(){u()}),[o]),Object(n.useEffect)((function(){u()}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("table",{style:d,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{style:d,children:[Object(r.jsx)("th",{style:d}),Object(r.jsx)("th",{width:"5%"})]})}),Object(r.jsx)("tbody",{children:h?h.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{style:d,children:Object(r.jsx)("a",{href:"http://43.228.126.245/pms-shimi/storage/uploads/".concat(e.name),target:"_blank",rel:"noreferrer",children:e.name})}),Object(r.jsx)("td",{style:d,children:Object(r.jsxs)("button",{type:"button",className:"btn shadow-none",onClick:function(){var t;t=e.media_id,l.a.post("/file/deleteFile",{media_id:t}).then((function(){O((function(e){return e.filter((function(e){return e.media_id!==t}))}))})).catch((function(){Object(i.a)("Unable to Delete Media","info")}))},children:[Object(r.jsx)(s.a,{})," "]})})]},e.media_id)})):Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:Object(r.jsx)("p",{children:"no files uploaded yet"})})})})]})})}},278:function(e,t,c){"use strict";var a=c(27),n=c(1),s=c(63),i=c(276),l=c(7),r=c(141),o=c(215),d=c(2);t.a=function(e){var t=e.attachmentModal,c=e.setAttachmentModal,j=e.moduleId,b=e.roomName,h=e.fileTypes,O=e.altTagData,u=e.desc,x=e.updateFile,m=e.setUpdateFile,p=Object(n.useState)([]),f=Object(a.a)(p,2),v=f[0],g=f[1],y=Object(n.useState)(),_=Object(a.a)(y,2),C=_[0],D=_[1],N=Object(n.useState)(null),A=Object(a.a)(N,2),H=A[0],F=A[1],M=Object(n.useState)(null),k=Object(a.a)(M,2),L=k[0],Y=k[1],S=function(){l.a.post("/file/getListOfFiles",{record_id:j,room_name:b}).then((function(e){Y(e.data)})).catch((function(){Object(r.a)("Unable to fetch files","info")}))};return Object(d.jsxs)("div",{children:[Object(d.jsxs)(s.N,{isOpen:t,children:[Object(d.jsx)(s.Q,{children:"Upload Media"}),Object(d.jsxs)(s.O,{children:[Object(d.jsxs)(s.C,{children:[Object(d.jsx)(i.a,{multiple:!0,handleChange:function(e){var t=Object.entries(e).map((function(e){return e[1]}));g(e),D(t),console.log(e)},name:"file",types:h}),C?C.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("span",{children:[" Name: ",e.name," "]})})})):Object(d.jsx)("span",{children:"No file selected"})]}),H&&Object(d.jsx)("div",{className:"progress mt-2",children:Object(d.jsx)("div",{className:"progress-bar h-4",role:"progressbar","aria-valuenow":H,"aria-valuemin":"0","aria-valuemax":"100",style:{width:"".concat(H,"%")},children:"".concat(H,"% uploaded")})})]}),Object(d.jsxs)(s.P,{children:[Object(d.jsx)(s.e,{color:"primary",className:"shadow-none",onClick:function(){!function(){if(v&&0!==Object.keys(v).length){var e=new FormData;Object.entries(v).map((function(e){return e[1]})).forEach((function(t){e.append("files",t)})),e.append("record_id",j),e.append("room_name",b),e.append("alt_tag_data",O),e.append("description",u),l.a.post("/file/uploadFiles",e,{onUploadProgress:function(e){console.log(Math.round(e.loaded/e.total*100)),F(Math.round(e.loaded/e.total*100))}}).then((function(){Object(r.a)("Files Uploaded Successfully","success"),m(!x),setTimeout((function(){c(!1),S()}),100)})).catch((function(){Object(r.a)("Unable to upload File","error")}))}else Object(r.a)("No files selected","info")}()},children:"Upload"}),Object(d.jsx)(s.e,{color:"secondary",className:"shadow-none",onClick:function(){c(!1)},children:"Cancel"})]})]}),Object(d.jsx)(o.a,{getFile:L,getFiles:S})]})}},821:function(e,t,c){"use strict";c(4),c(6),c(1);var a=c(63),n=c(71),s=c(2);t.a=function(e){var t=e.editData,c=e.navigate,i=e.applyChanges,l=e.backToList,r=e.module,o=Object(n.usePermify)();o.isAuthorized,o.isLoading;return Object(s.jsx)("div",{children:Object(s.jsx)(a.i,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(s.jsx)("div",{className:"d-flex flex-row-reverse",children:Object(s.jsxs)(a.eb,{children:[Object(s.jsxs)(a.s,{className:"d-flex",xl:3,sm:12,children:[" ",Object(s.jsx)(n.HasAccess,{roles:null,permissions:"".concat(r,"-edit"),renderAuthFailed:Object(s.jsx)("p",{}),children:Object(s.jsxs)(a.e,{onClick:function(){t(),c("/Leave")},color:"primary",children:[" ","Save"]})})]}),Object(s.jsxs)(a.s,{className:"d-flex",xl:3,sm:12,children:[" ",Object(s.jsx)(n.HasAccess,{roles:null,permissions:"".concat(r,"-edit"),renderAuthFailed:Object(s.jsx)("p",{}),children:Object(s.jsx)(a.e,{onClick:function(){t(),i()},color:"primary",children:"Apply"})})]}),Object(s.jsxs)(a.s,{className:"d-flex",xl:4,sm:12,children:[" ",Object(s.jsx)(a.e,{onClick:function(){l()},color:"dark",children:"Back To List"})]}),Object(s.jsxs)(a.s,{className:"d-flex",xl:3,sm:12,children:[" ",Object(s.jsx)(n.HasAccess,{roles:null,permissions:"".concat(r,"-remove"),renderAuthFailed:Object(s.jsx)("p",{children:"You are not authorized to access!"}),children:Object(s.jsx)(a.e,{color:"danger",onClick:function(){},children:"Delete"})})]})]})})})})}}}]);
//# sourceMappingURL=98.78ea76ab.chunk.js.map