{"version":3,"sources":["views/smartconTables/Tickets.js"],"names":["App","reportTemplateRef","useRef","useState","quote","setQuote","id","useParams","useEffect","api","post","quote_id","then","res","console","log","data","handleDownloadPdf","htmlWidth","$","width","htmlHeight","height","topLeftMargin","pdfHeight","pdfWidth","canvasImageWidth","canvasImageHeight","totalPDFPages","Math","ceil","pdf","JsPDF","html2canvas","allowTaint","canvas","getContext","imgData","toDataURL","addImage","i","addPage","save","type","className","onClick","ref","src","alt","company_name","billing_address_flat","billing_address_street","billing_address_country","billing_address_po_code","email","quote_date","substring","quote_code","salutation","first_name","project_reference","map","e","quote_item_title","description","unit","quantity","unit_price","amount"],"mappings":"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","file":"static/js/243.ca6581fd.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport JsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as $ from 'jquery';\nimport html2canvas from 'html2canvas';\nimport { useParams } from 'react-router-dom';\nimport api from '../../constants/api';\n\nfunction App() {\n  const reportTemplateRef = useRef(null);\n  const [quote, setQuote] = useState();\n\n  const { id } = useParams();\n\n  const getQuotePDF = () => {\n    api.post('tender/getQuotePDF', { quote_id: id }).then((res) => {\n      console.log(res.data.data);\n      setQuote(res.data.data);\n    });\n  };\n\n  useEffect(() => {\n    getQuotePDF();\n  }, []);\n\n  const handleDownloadPdf = async () => {\n    const htmlWidth = $('.canvas_div_pdf').width();\n    const htmlHeight = $('.canvas_div_pdf').height();\n    const topLeftMargin = 15;\n    const pdfWidth = htmlWidth + topLeftMargin * 2;\n    const pdfHeight = pdfWidth * 1.5 + topLeftMargin * 2;\n    const canvasImageWidth = htmlWidth;\n    const canvasImageHeight = htmlHeight;\n\n    const totalPDFPages = Math.ceil(htmlHeight / pdfHeight) - 1;\n    const pdf = new JsPDF('p', 'pt', [pdfWidth, pdfHeight]);\n\n    html2canvas($('.canvas_div_pdf')[0], { allowTaint: true }).then((canvas) => {\n      canvas.getContext('2d');\n\n      console.log(canvas.height + canvas.width);\n\n      const imgData = canvas.toDataURL('image/jpeg', 1.0);\n      // var pdf = new jsPDF('p','mm',[297, 210]);\n\n      pdf.addImage(\n        imgData,\n        'JPG',\n        topLeftMargin,\n        topLeftMargin,\n        canvasImageWidth,\n        canvasImageHeight,\n      );\n\n      for (let i = 1; i <= totalPDFPages; i++) {\n        pdf.addPage(pdfWidth, pdfHeight);\n        pdf.addImage(\n          imgData,\n          'JPG',\n          topLeftMargin,\n          -(pdfHeight * i) + topLeftMargin * 4,\n          canvasImageWidth,\n          canvasImageHeight,\n        );\n      }\n\n      pdf.save('Print-Link.pdf');\n    });\n  };\n\n  return (\n    <div>\n      <button type=\"button\" className=\"button\" onClick={handleDownloadPdf}>\n        Generate PDF\n      </button>\n      <div id=\"pdf\" className=\"canvas_div_pdf\" ref={reportTemplateRef}>\n        {/* <div className='container'>\n        <div className=\"page\"> */}\n\n        <div className=\"page-content container\">\n          <div className=\"text-blue-d2\">\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <div className=\"text-center text-150\">\n                  <img src=\"/static/media/logo.9e5dbf9f.jpg\" alt=\"Logo\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"page-tools\"></div>\n          </div>\n\n          <div className=\"page-header text-blue-d2\">\n            <p className=\"text-sm text-grey-m2 \">\n              <p className=\"text-sm text-grey-m2\">\n                Reg No:\n                <small className=\"page-info\">\n                  <i className=\"fa fa-angle-double-right text-80\"></i>\n                  201526293M\n                </small>\n              </p>\n            </p>\n\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <div className=\"text-center \">\n                  <span className=\"text-default-d3\">QUOTATION</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"page-tools d-flex \">\n              <div className=\"text-grey-m2 justify-content-end\">\n                <div className=\"my-1\">10 Jalan Besar, #15-02 Sim Lim Tower,</div>\n                <div className=\"my-1\">Singapore - 208787,</div>\n                <div className=\"my-1\">Email:arif@usoftsolutions.com</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"container px-0\">\n            <div className=\"row mt-4\">\n              <div className=\"col-12 col-lg-12\">\n                <div className=\"row\">\n                  <div className=\"col-sm-6\">\n                    <div>\n                      <span className=\"text-sm text-grey-m2 align-middle\">To:</span>\n                    </div>\n                    <div className=\"text-grey-m2 \">\n                      <div className=\"my-1\"> {quote && quote[0].company_name}</div>\n                      <div className=\"my-1\"> {quote && quote[0].billing_address_flat}</div>\n                      <div className=\"my-1\"> {quote && quote[0].billing_address_street}</div>\n                      <div className=\"my-1\">\n                        {' '}\n                        {` ${\n                          quote &&\n                          quote[0].billing_address_country &&\n                          quote[0].billing_address_po_code\n                        } `}\n                      </div>\n                      <div className=\"my-1\"> {quote && quote[0].email}</div>\n                      <div className=\"my-1\"> oncompany.com</div>\n                    </div>\n                  </div>\n\n                  <div className=\"text-95 col-sm-6 align-self-start d-sm-flex justify-content-end\">\n                    <hr className=\"d-sm-none\" />\n                    <div className=\"text-grey-m2\">\n                      <div className=\"mt-1 mb-2 text-secondary-m1 text-600 text-125\">\n                        Date : {quote && quote[0].quote_date.substring(1, 10)}\n                      </div>\n                      <div className=\"mt-1 mb-2 text-secondary-m1 text-600 text-125\">\n                        {quote && quote[0].quote_code}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"row mt-5\">\n                  <div className=\"col-12\">\n                    <div className=\"text-grey-m2 \">\n                      <div className=\"my-1\">\n                        <b> {quote && quote[0].salutation && quote[0].first_name} </b>\n                      </div>\n                      <div className=\"my-1 mt-3\">\n                        <b>Project:-</b> {quote && quote[0].project_reference}\n                      </div>\n                      <div className=\"my-1\"> Dear Sir,</div>\n                      <div className=\"my-1 mt-3\">\n                        {' '}\n                        With reference to the above captions, we would like to thank you for\n                        inviting us to quote for the above mentioned works and we are pleased to\n                        submit herewith our Value Quotation for you kind persual.\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-4\">\n                  <div className=\"row text-600 text-white bgc-default-tp1 py-25\">\n                    <div className=\"d-none d-sm-block col-1\">Sn</div>\n                    <div className=\"col-9 col-sm-3\">Description</div>\n                    <div className=\"d-none d-sm-block col-4 col-sm-1\">EA</div>\n                    <div className=\"d-none d-sm-block col-sm-1\">Qty</div>\n                    <div className=\"d-none d-sm-block col-sm-2\">U/R(S$)</div>\n                    <div className=\"d-none d-sm-block col-sm-2\">Amt(S$)</div>\n                    <div className=\"col-2\">Remarks</div>\n                  </div>\n\n                  <div className=\"text-95 text-secondary-d3\">\n                    <div className=\"row mb-2 mb-sm-0 py-25\">\n                      {/* \n                                    {company && company.map((e)=>{\n                              return  <option key={e.company_id} value={e.company_id} >{e.company_name}</option>\n\n                          })} */}\n\n                      {quote &&\n                        quote.map((e) => {\n                          return (\n                            <>\n                              <div className=\"d-none d-sm-block col-1\">{e.id}</div>\n                              <div className=\"col-9 col-sm-3\">\n                                {e.quote_item_title}\n                                <p>{e.description}</p>\n                              </div>\n                              <div className=\"d-none d-sm-block col-4 col-sm-1\">{e.unit}</div>\n                              <div className=\"d-none d-sm-block col-sm-1\">{e.quantity}</div>\n                              <div className=\"d-none d-sm-block col-sm-2\">{e.unit_price}</div>\n                              <div className=\"d-none d-sm-block col-sm-2\">{e.amount}</div>\n                              <div className=\"col-2\"></div>\n                            </>\n                          );\n                        })}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"sourceRoot":""}